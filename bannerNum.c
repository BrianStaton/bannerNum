#include <stdio.h>
#include <malloc.h>
#include <math.h>
#include "bannerNum.h"

#define NUM_NUMS        (10)
#define LINES_PER_NUM   (7)

#ifndef RASTER_FONT
#define RASTER_FONT     (1)
#endif // RASTER_FONT

#if (1 == RASTER_FONT)
static const char *Raster[NUM_NUMS][LINES_PER_NUM] =
{
    {
          "  #####    "
        , " ##   ##   "
        , "##     ##  "
        , "##  #  ##  "
        , "##     ##  "
        , " ##   ##   "
        , "  #####    "
    }
    ,{
          "   ##    "
        , " ####    "
        , "   ##    "
        , "   ##    "
        , "   ##    "
        , "   ##    "
        , " ######  "
    }
    ,{
          " #######   "
        , "##     ##  "
        , "       ##  "
        , " #######   "
        , "##         "
        , "##         "
        , "#########  "
    }
    ,{
          " #######   "
        , "##     ##  "
        , "       ##  "
        , " #######   "
        , "       ##  "
        , "##     ##  "
        , " #######   "
    }
    ,{
          "##         "
        , "##    ##   "
        , "##    ##   "
        , "##    ##   "
        , "#########  "
        , "      ##   "
        , "      ##   "
    }
    ,{
          "########  "
        , "##        "
        , "##        "
        , "#######   "
        , "      ##  "
        , "##    ##  "
        , " ######   "
    }
    ,{
          " #######   "
        , "##     ##  "
        , "##         "
        , "########   "
        , "##     ##  "
        , "##     ##  "
        , " #######   "
    }
    ,{
          "########  "
        , "##    ##  "
        , "    ##    "
        , "   ##     "
        , "  ##      "
        , "  ##      "
        , "  ##      "
    }
    ,{
          " #######   "
        , "##     ##  "
        , "##     ##  "
        , " #######   "
        , "##     ##  "
        , "##     ##  "
        , " #######   "
    }
    ,{
          " #######   "
        , "##     ##  "
        , "##     ##  "
        , " ########  "
        , "       ##  "
        , "##     ##  "
        , " #######   "
    }
};
#elif (2 == RASTER_FONT)
static const char *Raster[NUM_NUMS][LINES_PER_NUM] =
{
    {
          "  ###   "
        , " #   #  "
        , "#     # "
        , "#  #  # "
        , "#     # "
        , " #   #  "
        , "  ###   "
    }
    ,{
          "  #   "
        , " ##   "
        , "# #   "
        , "  #   "
        , "  #   "
        , "  #   "
        , "##### "
    }
    ,{
          " #####  "
        , "#     # "
        , "      # "
        , " #####  "
        , "#       "
        , "#       "
        , "####### "
    }
    ,{
          " #####  "
        , "#     # "
        , "      # "
        , " #####  "
        , "      # "
        , "#     # "
        , " #####  "
    }
    ,{
          "#       "
        , "#    #  "
        , "#    #  "
        , "#    #  "
        , "####### "
        , "     #  "
        , "     #  "
    }
    ,{
          "####### "
        , "#       "
        , "#       "
        , " #####  "
        , "      # "
        , "#     # "
        , " #####  "
    }
    ,{
          " #####  "
        , "#     # "
        , "#       "
        , "######  "
        , "#     # "
        , "#     # "
        , " #####  "
    }
    ,{
          "####### "
        , "#    #  "
        , "    #   "
        , "   #    "
        , "  #     "
        , "  #     "
        , "  #     "
    }
    ,{
          " #####  "
        , "#     # "
        , "#     # "
        , " #####  "
        , "#     # "
        , "#     # "
        , " #####  "
    }
    ,{
          " #####  "
        , "#     # "
        , "#     # "
        , " ###### "
        , "      # "
        , "#     # "
        , " #####  "
    }
};
#elif (3 == RASTER_FONT)
static const char *Raster[NUM_NUMS][LINES_PER_NUM] =
{
    {
          "  ***   "
        , " *   *  "
        , "*     * "
        , "*  *  * "
        , "*     * "
        , " *   *  "
        , "  ***   "
    }
    ,{
          "  *   "
        , " **   "
        , "* *   "
        , "  *   "
        , "  *   "
        , "  *   "
        , "***** "
    }
    ,{
          " *****  "
        , "*     * "
        , "      * "
        , " *****  "
        , "*       "
        , "*       "
        , "******* "
    }
    ,{
          " *****  "
        , "*     * "
        , "      * "
        , " *****  "
        , "      * "
        , "*     * "
        , " *****  "
    }
    ,{
          "*       "
        , "*    *  "
        , "*    *  "
        , "*    *  "
        , "******* "
        , "     *  "
        , "     *  "
    }
    ,{
          "******* "
        , "*       "
        , "*       "
        , " *****  "
        , "      * "
        , "*     * "
        , " *****  "
    }
    ,{
          " *****  "
        , "*     * "
        , "*       "
        , "******  "
        , "*     * "
        , "*     * "
        , " *****  "
    }
    ,{
          "******* "
        , "*    *  "
        , "    *   "
        , "   *    "
        , "  *     "
        , "  *     "
        , "  *     "
    }
    ,{
          " *****  "
        , "*     * "
        , "*     * "
        , " *****  "
        , "*     * "
        , "*     * "
        , " *****  "
    }
    ,{
          " *****  "
        , "*     * "
        , "*     * "
        , " ****** "
        , "      * "
        , "*     * "
        , " *****  "
    }
};
#elif (4 == RASTOR_FONT)
static const char *Raster[NUM_NUMS][LINES_PER_NUM] =
{
    {
          "  000   "
        , " 0   0  "
        , "0     0 "
        , "0  0  0 "
        , "0     0 "
        , " 0   0  "
        , "  000   "
    }
    ,{
          "  1   "
        , " 11   "
        , "1 1   "
        , "  1   "
        , "  1   "
        , "  1   "
        , "11111 "
    }
    ,{
          " 22222  "
        , "2     2 "
        , "      2 "
        , " 22222  "
        , "2       "
        , "2       "
        , "2222222 "
    }
    ,{
          " 33333  "
        , "3     3 "
        , "      3 "
        , " 33333  "
        , "      3 "
        , "3     3 "
        , " 33333  "
    }
    ,{
          "4       "
        , "4    4  "
        , "4    4  "
        , "4    4  "
        , "4444444 "
        , "     4  "
        , "     4  "
    }
    ,{
          "5555555 "
        , "5       "
        , "5       "
        , " 55555  "
        , "      5 "
        , "5     5 "
        , " 55555  "
    }
    ,{
          " 66666  "
        , "6     6 "
        , "6       "
        , "666666  "
        , "6     6 "
        , "6     6 "
        , " 66666  "
    }
    ,{
          "7777777 "
        , "7    7  "
        , "    7   "
        , "   7    "
        , "  7     "
        , "  7     "
        , "  7     "
    }
    ,{
          " 88888  "
        , "8     8 "
        , "8     8 "
        , " 88888  "
        , "8     8 "
        , "8     8 "
        , " 88888  "
    }
    ,{
          " 99999  "
        , "9     9 "
        , "9     9 "
        , " 999999 "
        , "      9 "
        , "9     9 "
        , " 99999  "
    }
};
#elif
#error "Rastor Font Undefined"
#endif

void printBannerNum(uint32_t theNum, uint32_t numDigits)
{
    uint32_t i;
    uint32_t j;
    uint32_t n;
    uint32_t holdNumDigits = numDigits;
    uint32_t *theDigits;

    if (numDigits > 0)
    {
        n = numDigits;
    }
    else
    {
        n = (uint32_t)(log((double)theNum) / log(10.0));
        ++n;
        holdNumDigits = n;
    }
    theDigits = (uint32_t *)(malloc(n * sizeof(uint32_t)));
    while(n)
    {
        --n;
        theDigits[n] = theNum % 10;
        theNum /= 10;
    }

    for(j=0; j<LINES_PER_NUM; j++)
    {
        for(i=0; i<holdNumDigits; i++)
        {
            printf("%s", Raster[theDigits[i]][j]);
        }
        printf("\n");
    }
    free(theDigits);
}
